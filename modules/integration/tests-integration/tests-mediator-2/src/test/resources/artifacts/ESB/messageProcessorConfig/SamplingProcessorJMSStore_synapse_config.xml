<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://ws.apache.org/ns/synapse">
	<proxy name="SamplingProxy" transports="https http" startOnLoad="true"
		trace="disable">
		<target>
			<inSequence>
				<property name="FORCE_SC_ACCEPTED" value="true" scope="axis2" />
				<property name="OUT_ONLY" value="true" />
				<log level="full" />
				<store messageStore="JMSMS" />
			</inSequence>
		</target>
	</proxy>
	<sequence name="SendToStockQuoteServiceWithRate">
		<property name="OUT_ONLY" value="true" scope="default" type="STRING" />
		<send>
			<endpoint>
				<address uri="http://localhost:8991" />
			</endpoint>
		</send>
	</sequence>

	<messageStore class="org.apache.synapse.message.store.impl.jms.JmsStore"
		name="JMSMS">
		<parameter name="store.producer.guaranteed.delivery.enable">false</parameter>
		<parameter name="java.naming.factory.initial">org.apache.activemq.jndi.ActiveMQInitialContextFactory</parameter>
		<parameter name="store.failover.message.store.name">JMSMS</parameter>
		<parameter name="store.jms.password">admin</parameter>
		<parameter name="java.naming.provider.url">tcp://localhost:61616</parameter>
		<parameter name="store.jms.username">admin</parameter>
		<parameter name="store.jms.JMSSpecVersion">1.1</parameter>
	</messageStore>

	<messageProcessor
		class="org.apache.synapse.message.processor.impl.sampler.SamplingProcessor"
		name="SamplingProcessor1" messageStore="JMSMS">
		<parameter name="interval">1000</parameter>
		<parameter name="sequence">SendToStockQuoteServiceWithRate</parameter>
		<parameter name="concurrency">1</parameter>
		<parameter name="is.active">true</parameter>
	</messageProcessor>
</definitions> 
